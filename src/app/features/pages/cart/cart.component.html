<section class="py-10 mt-12">
  <div
    class="container grid md:grid-cols-12 items-start gap-10 text-[--text-color] px-5 md:px-10 lg:px-15 xl:px-20 mx-auto"
  >
    <div class="order-part md:col-span-8">
      <div class="cart-title flex justify-between">
        <h2 class="text-5xl mb-5">
          Shopping Cart
          <span class="text-xl text-[#FF7F50]"
            >({{ cartDetails.products.length }} items)</span
          >
        </h2>
        <button
          class="py-2 px-5 text-[#FF7F50] rounded-3xl outline outline-4 hover:text-[#ff7f5090] outline-[#FF7F50] hover:outline-[#ff7f5090] transition-all duration-100 cursor-pointer active:scale-90 ease-in-out self-center"
          (click)="clearCart()"
          [style.pointer-events]="
            cartDetails.products.length == 0 ? 'none' : 'auto'
          "
          [ngStyle]="{
            opacity: cartDetails.products.length == 0 ? 0.5 : 1,
          }"
        >
          <i class="fa-solid fa-broom"></i> Clear My Cart
        </button>
      </div>
      @if (cartDetails.products.length > 0) {
      <div class="cart-part bg-[#ffffffb3] rounded-2xl p-8 shadow-lg">
        @for (item of cartDetails.products; track item.product._id) { @if(item
        != cartDetails.products[0]){
        <hr class="hor-line" />
        }
        <div class="item flex justify-between items-center">
          <div class="details flex justify-start space-x-5 items-center">
            <div
              class="img-part cursor-pointer"
              [routerLink]="['/details', item.product._id]"
            >
              <img
                [src]="item.product.imageCover"
                class="w-36 border-2 border-opacity-50 opacity-75 me-5 border-[--text-color] rounded-2xl"
                [alt]="item.product.title"
              />
            </div>
            <div class="text-part">
              <h4
                class="text-2xl cursor-pointer"
                [routerLink]="['/details', item.product._id]"
              >
                {{ item.product.title }}
              </h4>
              <div
                class="add-remove flex flex-row justify-start items-center gap-5 mt-10"
              >
                <div
                  class="add-rem text-xl flex space-x-8 items-center py-2 px-5 rounded-3xl hover:text-[--main-color] outline outline-4 outline-[--text-color] hover:outline-[--main-color] transition-all duration-100 cursor-pointer"
                >
                  <i
                    class="fa-solid fa-minus active:scale-90 ease-in-out"
                    (click)="updateItemCount(item.product._id, item.count - 1)"
                  ></i>
                  <span class="font-medium">{{ item.count }}</span>
                  <i
                    class="fa-solid fa-plus active:scale-90 ease-in-out"
                    (click)="updateItemCount(item.product._id, item.count + 1)"
                  ></i>
                </div>
                <div>
                  <button
                    class="hover:text-[--main-color] transition-all duration-100 cursor-pointer active:scale-90 ease-in-out text-xl"
                    (click)="removeItem(item.product._id)"
                  >
                    <i class="fa-solid fa-trash text-[#FF7F50]"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="price text-2xl">
            <p>${{ item.price }}</p>
          </div>
        </div>
        }
      </div>
      }
    </div>
    <div
      class="summary-part md:col-span-4 bg-[#ffffffb3] rounded-2xl p-5 shadow-lg"
    >
      <h3 class="text-2xl mb-4">Order Summary</h3>
      <hr class="hor-line" />
      <div class="sum-part flex justify-between text-lg mb-5">
        <p>Total Price</p>
        <p>${{ cartDetails.totalCartPrice }}</p>
      </div>
      <button
        class="btn px-30 sm:px-15 md:px-5 xl:px-10 block mx-auto"
        [disabled]="cartDetails.products.length == 0"
        [routerLink]="['/checkout', cartDetails._id]"
        [style.pointer-events]="
          cartDetails.products.length == 0 ? 'none' : 'auto'
        "
        [ngStyle]="{
          opacity: cartDetails.products.length == 0 ? 0.5 : 1
        }"
      >
        Proceed to Checkout
      </button>
    </div>
  </div>
</section>
